:PROPERTIES:
:ID:       4401310f-222c-4031-8bd3-886830619480
:ROAM_ALIASES: nothung
:END:
#+STARTUP: overview
#+filetags: :Emacs:
#+TITLE: âš¡My Emacs Config - Nothung

Emacsã‚’æ¥µé™ã¾ã§å©ãä¸Šã’, ãªã«ã‚ˆã‚Šã‚‚å¼·é­ãªåˆƒã«ã™ã‚‹. [[https://www.youtube.com/watch?v=04L18rQiIgw][ä¸€ã¤ã®ã“ã¨ã‚’æ¥µã‚ã‚‹]].

å‰¯é¡Œã®ãƒãƒ¼ãƒˆã‚©ãƒ³ã‚°(Nothung)ã¨ã¯å‹‡è€…ã‚¸ãƒ¼ã‚¯ãƒ•ãƒªãƒ¼ãƒˆã®æŒã¤ä¼èª¬ã®å‰£ã§ã‚ã‚‹.

- https://www.youtube.com/watch?v=B6wChr_geAg
- https://www.youtube.com/watch?v=v31N8zxGhQY

---

packageã®ä¸¦ã³é †ã¯ [[https://github.com/hlissner/doom-emacs][Doom Emacs]] ã® [[https://github.com/hlissner/doom-emacs/blob/develop/docs/modules.org][Molule Index]] (ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †)ã«å¾“ã†.

ref: https://github.com/tsu-nera/nothung

ã„ã¤ã‚‚å¿˜ã‚Œã‚‹Doom Emacs Configurationè¨˜æ³•ã¯ [[https://github.com/hlissner/doom-emacs/blob/master/docs/getting_started.org#configuring-doom][ã“ã“]].

- use-package! ã¯:defer, :hook, :commands, or :after ãŒçœç•¥ã•ã‚Œã‚‹ã¨èµ·å‹•æ™‚ã« loadã•ã‚Œã‚‹.
- after! ã¯ package ãŒ load ã•ã‚ŒãŸã¨ãã«è©•ä¾¡ã•ã‚Œã‚‹.
- add-hook! ã¯ mode æœ‰åŠ¹åŒ–ã®ã¨ã. setq-hook!ã¯ equivalent.

ã©ã‚Œã‚’ä½¿ã†ã‹ã®æ­£è§£ã¯ãªã„ãŒã™ã¹ã¦ use-package!ã ã¨èµ·å‹•ãŒé…ããªã‚‹ã®ã§
å ´åˆã«ã‚ˆã£ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã›ã‚ˆï¼Œã¨ã®ã“ã¨.

ref. éå»ã®è¨­å®šã¯[[https://github.com/tsu-nera/dotfiles/tree/master/.emacs.d/inits][ã“ã¡ã‚‰]]. 

#+begin_src emacs-lisp :tangle yes
;;; $DOOMDIR/config.el -*- lexical-binding: t; -*-
(load-file "~/.doom.d/private/config.el")
#+end_src

* App

** Twitter
#+begin_src emacs-lisp :tangle yes
;; App
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; twittering-mode
;; ã“ã®è¨­å®šãŒãªã„ã¨èªè¨¼ãŒå¤±æ•—ã—ãŸ.
;; twittering-oauth-get-access-token: Failed to retrieve a request token
(use-package! twittering-mode
  :init
  (setq twittering-allow-insecure-server-cert t))
#+end_src

** eww
Emacsã®ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ©ã‚¦ã‚¶([[https://www.gnu.org/software/emacs/manual/html_mono/eww.html][Manual]])

notes:
- ewwã‚’èµ·å‹•ã—ãŸã ã‘ã ã¨minibufferãªã®ã§C-gã§æ¶ˆãˆã¦ã—ã¾ã†ã®ã§å¤§ããC-x 1ã¨ã‹ã§å¤§ããã™ã‚‹.
- C-u M-x ewwã§ã²ã¨ã¤ã®bufferã‚’ä½¿ã„ã¾ã‚ã™ã®ã§ã¯ãªãåˆ¥ã®Bufferã§ewwã‚’é–‹ã.
- M-RETã§URLã‚’æ–°ã—ã„Bufferã§é–‹ã.
- Doom Emacsã ã¨C-c s o(online)ã§ã„ã‚ã„ã‚ã¨æ¤œç´¢ã§ãã‚‹(w/Chrome). helm-google-suggestçš„ãª.

#+begin_src emacs-lisp :tangle yes
(use-package! eww
  :bind
  ("C-c s w" . eww-search-words)
  ("C-c o w" . eww-open-in-new-buffer))
#+end_src

- ace-linkã‚’ã¤ã‹ã†ã¨ewwã®linkã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«é¸æŠã§ãã¦ä¾¿åˆ©.

#+begin_src emacs-lisp :tangle yes
(use-package! ace-link
  :config
  (eval-after-load 'eww '(define-key eww-mode-map "f" 'ace-link-eww))
  (ace-link-setup-default)
  (define-key org-mode-map (kbd "M-o") 'ace-link-org))
#+end_src

** org-web-tools
ewwã¨orgã‚’ä¾¿åˆ©ã«ã™ã‚‹ãƒ„ãƒ¼ãƒ«ç¾¤(https://github.com/alphapapa/org-web-tools).

#+begin_src emacs-lisp :tangle yes
(use-package! org-web-tools
  :bind
  ("C-c i l" . org-web-tools-insert-link-for-url))
#+end_src

** Pocket
ã‚ã¨ã§èª­ã‚€ã‚µãƒ¼ãƒ“ã‚¹.

#+begin_src emacs-lisp :tangle yes
(global-set-key (kbd "C-x w p") 'pocket-reader)
(use-package! pocket-reader
  :bind
  ("C-x w l" . pocker-reader-add-link)
  :config
  (setq pocket-reader-open-url-default-function #'eww)
  (setq pocket-reader-pop-to-url-default-function #'eww))
#+end_src

** RSS(Elfeed)

#+begin_src emacs-lisp :tangle yes
;; elfeed
(global-set-key (kbd "C-x w w") 'elfeed)
(use-package! elfeed
  :config
  (setq elfeed-feeds
        '(
          ("https://yuchrszk.blogspot.com/feeds/posts/default" blog) ; ãƒ‘ãƒ¬ã‚ªãªç”·
          ("https://www.youtube.com/feeds/videos.xml?channel_id=UCFo4kqllbcQ4nV83WCyraiw" youtube) ; ä¸­ç”°æ•¦å½¦
          ("https://www.youtube.com/feeds/videos.xml?channel_id=UCFdBehO71GQaIom4WfVeGSw" youtube) ;ãƒ¡ãƒ³ã‚¿ãƒªã‚¹ãƒˆDaiGo
          ("https://www.youtube.com/feeds/videos.xml?playlist_id=PL3N_SB4Wr_S2cGYuI02bdb4UN9XTZRNDu" youtube) ; ä¸æ²¢ã®æµå„€
          ("http://www.aaronsw.com/2002/feeds/pgessays.rss" blog) ; Paul Graham
          ))
  (setq-default elfeed-search-filter "@1-week-ago +unread ")
  (defun elfeed-search-format-date (date)
    (format-time-string "%Y-%m-%d %H:%M" (seconds-to-time date)))
  )
#+end_src

** Habitica

#+begin_src emacs-lisp :tangle yes
(use-package! habitica
  :commands habitica-tasks
  :init
  (bind-key "C-x t g" 'habitica-tasks)
  :config
  (setq habitica-show-streak t)
  (setq habitica-turn-on-highlighting nil))
#+end_src

* Checkers
#+begin_src emacs-lisp :tangle yes
;; Checkers
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

#+end_src

* Completion
#+begin_src emacs-lisp :tangle yes
;; Completion
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
(use-package! avy
  :bind
  ("M-g c" . avy-goto-char) ;; doom ã® keybind ä¸Šæ›¸ã.
  ("M-g l" . avy-goto-line) ;; doom ã® keybind ä¸Šæ›¸ã.
  ("M-g g". avy-goto-word-1))

;; ã†ã¾ãå‹•ã‹ãªã„ã®ã§å°å° doom ã¨ã®ç›¸æ€§ãŒæ‚ªã„ã®ã‹ã‚‚.
;; ã²ã¨ã¾ãš migemo ã—ãŸã„ã¨ãã¯ isearch ã§å¯¾å¿œ.
;; (use-package! avy-migemo
;;  :after migemo
;;  :bind
;;  ("M-g m m" . avy-migemo-mode)
;;  ("M-g c" . avy-migemo-goto-char-timer) ;; doom ã® keybind ä¸Šæ›¸ã.
;;  :config
;;  (avy-migemo-mode 1)
;;  (setq avy-timeout-seconds nil))

(use-package! swiper
  :bind
;  ("C-s" . swiper) ;; migemo ã¨ã†ã¾ãé€£æºã—ãªã„ã®ã§ isearch ç½®ãæ›ãˆã‚’ä¿ç•™. C-c s s ã§ swiper èµ·å‹•.
  :config
  (ivy-mode 1))
  
;; avy-migemo-e.g.swiper ã ã‘ãƒã‚¯ã‚‹
;; https://github.com/abo-abo/swiper/issues/2249
;;(after! avy-migemo
;;  (require 'avy-migemo-e.g.swiper))

;; org-roam ã® completion-at-point ãŒå‹•ä½œã—ãªã„ã®ã¯ã“ã„ã¤ã‹ãª...
;; (add-hook! 'org-mode-hook (company-mode -1))
;; company ã¯ãªã«ã’ã«ä½¿ã„ãã†ã ã‹ã‚‰ãªï¼ŒTAB ã§ã®ã¿è£œå®Œç™ºå‹•ã•ã›ã‚‹ã‹.
(setq company-idle-delay nil)
(global-set-key (kbd "TAB") #'company-indent-or-complete-common)
#+end_src

** affe

fuzzy find. ã‚ã„ã¾ã„æ¤œç´¢ for consult.

https://github.com/minad/affe

#+begin_src emacs-lisp :tangle yes
(use-package! affe
  :after consult
  :config
  (defun affe-orderless-regexp-compiler (input _type)
    (setq input (orderless-pattern-compiler input))
    (cons input (lambda (str) (orderless--highlight input str))))
  (setq affe-regexp-compiler #'affe-orderless-regexp-compiler))
#+end_src

** all-the-icons-completion

https://github.com/iyefrat/all-the-icons-completion

#+begin_src emacs-lisp :tangle no
(use-package! all-the-icons-completion
  :init
  (all-the-icons-completion-mode))
(add-hook! marginalia-mode-hook #'all-the-icons-completion-marginalia-setup)
#+end_src

* Config

#+begin_src emacs-lisp :tangle yes
;; Config
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;; doom specific config
;; (setq user-full-name "John Doe"
;;      user-mail-address "john@doe.com")
(setq confirm-kill-emacs nil) ; çµ‚äº†æ™‚ã®ç¢ºèªã¯ã—ãªã„.

;; ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã§ Emacs èµ·å‹•
;; ãƒ–ãƒ©ã‚¦ã‚¶ã¨ä¸¦ã¹ã¦è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒå¤šããªã£ãŸã®ã§ã„ã£ãŸã‚“ãƒã‚¹ã‚¯
;; (add-to-list 'initial-frame-alist '(fullscreen . maximized))

;; This is to use pdf-tools instead of doc-viewer
(use-package! pdf-tools
  :config
  (pdf-tools-install)
  ;; This means that pdfs are fitted to width by default when you open them
  (setq-default pdf-view-display-size 'fit-width)
  :custom
  (pdf-annot-activate-created-annotations t "automatically annotate highlights"))


#+end_src

* Editor
#+begin_src emacs-lisp :tangle yes
;; Editor
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; è‹±æ•°å­—ã¨æ—¥æœ¬èªã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’ã„ã‚Œã‚‹.
(use-package! pangu-spacing
  :config
  (global-pangu-spacing-mode 1)
  ;; ä¿å­˜æ™‚ã«è‡ªå‹•çš„ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã‚‹ã®ã‚’æŠ‘æ­¢.ã‚ãã¾ã§å…¥åŠ›æ™‚ã«ã—ã¦ãŠã.
  (setq pangu-spacing-real-insert-separtor nil))

;; è¨˜å·ã®å‰å¾Œã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã‚‹.
(use-package! electric-operator)
(add-hook! 'org-mode-hook #'electric-operator-mode)
#+end_src

** æ”¹è¡Œ(newline)ã¨æŠ˜ã‚Šè¿”ã—(wrap)

ã¾ãšæ”¹è¡Œ(newline)ã¨æŠ˜ã‚Šè¿”ã—(wrap)ã®ï¼’ã¤ã®æ¦‚å¿µãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„. 

æ–¹é‡ã¨ã—ã¦è‡ªå‹•æ”¹è¡Œã¯ç„¡åŠ¹, è‡ªå‹•æŠ˜ã‚Šè¿”ã—ã¯è¨±ã™. 

auto-fill-modeã§è‡ªå‹•æ”¹è¡Œã•ã‚Œã‚‹. ã“ã‚Œã¯ç„¡åŠ¹ã«ã™ã‚‹. 

è¿½è¨˜: æ–¹é‡å¤‰æ›´. ã‚³ãƒ¼ãƒ‰ã§ã¯auto-fillã‚’è¨±ã™. ãã—ã¦å˜ã«(auto-fill-mode -1)ã‚’ã¨ã“ã‚ã§modeã®hookã«ã‚ˆã£ã¦å†åº¦æœ‰åŠ¹ã«ãªã‚‹æ°—ãŒã™ã‚‹. 

#+Begin_src emacs-lisp :tangle yes
;; (auto-fill-mode -1)
#+end_src

å•é¡Œã¯Markdownã‚„Org-modeã§autl-fillãŒç™ºå‹•ã—ã¦æ”¹è¡Œã•ã‚Œã‚‹ã¨ã“ã‚. org-modeã§å†åº¦hookãŒèµ°ã‚Šæœ‰åŠ¹ã«ãªã‚‹æ°—ãŒã™ã‚‹ã®ã§ã‚³ãƒ¬ã§æ¯ã‚’æ­¢ã‚ã‚‹. 

->æ¯ãŒæ­¢ã¾ã‚‰ãªã„ã®ã§è«¦ã‚ãŸ. ã„ãã‚‰ç„¡åŠ¹ã«ã—ã¦ã‚‚org-mode-hookã®å»¶é•·ã§auto-fill-modeã‚’onã«ã—ã¦ã—ã¾ã†äººãŒã„ã‚‹. ãã—ã¦ãã®çŠ¯äººãŒèª°ã‹ï¼’æ™‚é–“è¿½æ±‚ã—ã¦ã‚‚çµå±€ã‚ã‹ã‚‰ãªã„. Doom Emacsã®è¨­å®šã®ä»•æ¥­ã¯ã‚ã‚‹. 

#+begin_src emacs-lisp :tangle yes
(auto-fill-mode -1)
(remove-hook 'org-mode-hook #'auto-fill-mode)
;; (remove-hook 'org-mode-hook #'turn-on-auto-fill)
;; (remove-hook 'text-mode-hook #'auto-fill-mode)
;; (remove-hook 'text-mode-hook #'turn-on-auto-fill)
;; (add-hook 'org-mode-hook #'turn-off-auto-fill)
;; (add-hook 'text-mode-hook #'turn-off-auto-fill)
;; (add-hook 'org-roam-mode-hook #'turn-off-auto-fill)
#+end_src

ã“ã‚Œã«ã‚ˆã£ã¦æŠ˜ã‚Šè¿”ã—ã®é™ç•Œã‚’80ã‹ã‚‰99999ã«ã™ã‚‹ã“ã¨ã«ã—ã¦å›é¿ã™ã‚‹. 

#+begin_src emacs-lisp :tangle yes
(setq-default fill-column 99999)
(setq fill-column 99999)
#+end_src

ã“ã‚Œã«ã‚ˆã‚ŠæŠ˜ã‚Šè¿”ã—ã§ / ã‚„ $ è¨˜å·ãŒè¡¨ç¤ºã•ã‚Œã‚‹. ä»¥ä¸‹ã®è¨­å®šã§æ¶ˆã™. 

#+begin_src emacs-lisp :tangle yes
;; / ã‚’å‰Šé™¤
(set-display-table-slot standard-display-table 'wrap ?\ )
;; $ ã‚’å‰Šé™¤
(set-display-table-slot standard-display-table 0 ?\ )
#+end_src

ã•ã‚‰ã«æŠ˜ã‚Šè¿”ã—ã®æ¬¡ã®ãƒ©ã‚¤ãƒ³ã«ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒæŒ¿å…¥ã•ã‚Œã‚‹. ã“ã‚Œã¯electric-indent-modeã®ä»•æ¥­. ç¾åœ¨org-modeã®ã¿ã§ç„¡åŠ¹ä¸­. 

æŠ˜ã‚Šè¿”ã—off/onã¯, M-x toggle-truncate-linesã§åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹. 

** visual-line-mode

å˜èªå˜ä½ã§ã®æŠ˜ã‚Šè¿”ã—ã‚’ã™ã‚‹Emacsæ¨™æº–å®Ÿè£…ã®ãƒ¢ãƒ¼ãƒ‰. 

Emacsã¯ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å³ç«¯ã®è¿‘ãã®å˜èªã®å¢ƒç•Œã§æŠ˜ã‚Šè¿”ã™ã‚ˆã†è©¦ã¿ã‚‹. ã“ã‚Œã¯å˜èªã®é€”ä¸­ã§æŠ˜ã‚Šè¿”ã•ãªã„ã“ã¨ã«ã‚ˆã‚Šå¯èª­æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚. 

https://ayatakesi.github.io/emacs/25.1/Visual-Line-Mode.html

ã“ã®è¨­å®šã¯ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®å¹…ã«ã‚ˆã£ã¦åˆ¤å®šã•ã‚Œã‚‹ãŸã‚ãŸã¨ãˆã°æ–‡å­—åˆ—80ã§æŠ˜ã‚Šè¿”ã™ã¨ã‹ã§ã¯ãªã„. 

æ—¥æœ¬èªã¨è‹±èªãŒå…¥ã‚Šäº¤ã˜ã‚‹ã¨ãã®è§£é‡ˆãŒå¤‰ãªã®ã§ä»¥ä¸‹ã‚’è¨­å®šã—ãŸ. 

#+begin_src emacs-lisp :tangle yes
(setq word-wrap-by-category t)
#+end_src

ref: [[https://www.reddit.com/r/emacs/comments/ov2s2r/wordwrap_problem_with_chinese_or_japanese/h76ipjy/][Word-wrap problem with Chinese or Japanese characters : emacs]]

** visual-fill-column

Doomã ã¨ã„ã‚‰ãªã„ã‹ã‚‚ã ã‘ã©. 

#+begin_src emacs-lisp :tangle yes
;; (add-hook! visual-line-mode 'visual-fill-column-mode)
#+end_src

-> perfect-marginã¨ã®ç›¸æ€§ãŒæ‚ªã„æ°—ãŒã™ã‚‹ã®ã§ã„ã£ãŸã‚“ç„¡åŠ¹. 

- ref.
  -  [[http://sleepboy-zzz.blogspot.com/2015/12/emacs-visual-fill-columnel_29.html][memo: Emacs ã® visual-fill-column.el ãŒä¾¿åˆ©ã ã£ãŸ]]

** perfect-margin

ã„ã„æ„Ÿã˜ã«marginã‚’ã¨ã£ã¦ãã‚Œã‚‹ (https://github.com/mpwang/perfect-margin)

#+begin_src emacs-lisp :tangle yes
(use-package! perfect-margin
  :config
  (perfect-margin-mode 1))
#+end_src

** ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ç¸¦åˆ†å‰²ç·šã‚’UTF-8ã§ãã‚Œã„ã«æã

ref: [[https://www.reddit.com/r/emacs/comments/3u0d0u/how_do_i_make_the_vertical_window_divider_more/][How do I make the vertical window divider more pretty? : emacs]]

#+begin_src emacs-lisp :tangle yes
(unless (display-graphic-p)
  ;; ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ç¸¦åˆ†å‰²ç·šã‚’UTF-8ã§ãã‚Œã„ã«æã
  (defun my-change-window-divider ()
    (interactive)
    (let ((display-table (or buffer-display-table
           standard-display-table
           (make-display-table))))
      (set-display-table-slot display-table 5 ?â”‚)
      (set-window-display-table (selected-window) display-table)))
  (add-hook 'window-configuration-change-hook 'my-change-window-divider))
#+end_src

** whitespace

ä½™åˆ†ãªç©ºç™½/ã‚¿ãƒ–ã«è‰²ã¥ã‘.

#+begin_src emacs-lisp :tangle yes
(use-package! whitespace
  :config
  ;; limit lie length -> display-fill-column-indicator-modeã‚’ä½¿ã†ãŸã‚ãƒã‚¹ã‚¯. 
  ;; (setq whitespace-line-column 80) 
  (setq whitespace-style '(face 
                           ;;lines-tail
                           ))
  ;; å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å¯è¦–åŒ–
  (setq whitespace-space-regexp "\\(\u3000+\\)")
  (global-whitespace-mode 1))
#+end_src

** display-fill-column-indicator-mode

Emacsã®ç”»é¢ã«1è¡Œ80æ–‡å­—ã®ã¨ã“ã‚ã«ç·šã‚’è–„ãå¼•ã.

ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ä¸–ç•Œã§ã¯æ˜”ã‹ã‚‰80 columns ruleãŒã‚ã‚Š, Emacsã§80æ–‡å­—ç›®ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã‚‚ã„ã‚ã„ã‚ã‚ã£ãŸã‚‚ã®ã®, Emacs 27.0.90ã‹ã‚‰defaultæ©Ÿèƒ½ã¨ã—ã¦æä¾›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ.

(æœ€ã‚‚80charã¯æ˜”ã®è©±ã§, æœ€è¿‘ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®å¤§ãã•ã ã¨100charãŒã„ã„ã¨ã„ã†è­°è«–ã‚‚ã‚ã‚‹).

ä»Šã¤ã‹ã£ã¦ã„ã‚‹ãƒ¢ãƒ‹ã‚¿ã§ç¸¦ã«ï¼“åˆ†å‰²ã™ã‚‹ã¨74ãŒã¡ã‚‡ã†ã©ã„ã„ã“ã¨ãŒã‚ã‹ã£ãŸ. (å…ˆé ­ã«è¡Œç•ªå·è¡¨ç¤º4char+1charã®marginã‚ã‚Š). 

#+begin_src emacs-lisp :tangle yes
(setq-default display-fill-column-indicator-column 74)
(global-display-fill-column-indicator-mode)
#+end_src


** iedit

è¤‡æ•°åŒæ™‚ç·¨é›†. 

ãªãŠDoom Emacsã ã¨ +company/completeã¨C-;ã®keybindç«¶åˆ.

#+begin_src emacs-lisp :tangle yes
(use-package! iedit
  :bind
  ("C-;" . iedit-mode))
#+end_src

* Emacs

#+begin_src emacs-lisp :tangle yes
;; Emacs
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
(pixel-scroll-precision-mode)

;; doomã ã¨helpãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ãŸãŒdoomã®helpã¯F1ã‚’ã¤ã‹ã†.

(global-set-key (kbd "C-h") 'backward-delete-char)
(global-set-key (kbd "C-c h r") 'doom/reload)

;; Emacsèµ·å‹•æ™‚ã«ã„ã¡ã„ã¡è³ªå•ã•ã‚Œã‚‹ã®ã¯ã†ã–ã„.
;; default tã§ã¯ãªãœã‹ç„¡è¦–ã§ããªã„ã®ã§:allã‚’è¨­å®šã—ã¦ãŠã.
(setq enable-local-variables :all)

;;; å³ã‹ã‚‰å·¦ã«èª­ã‚€è¨€èªã«å¯¾å¿œã•ã›ãªã„ã“ã¨ã§æç”»é«˜é€ŸåŒ–
(setq-default bidi-display-reordering nil)
#+end_src

** recentf

#+begin_src emacs-lisp :tangle yes
(setq recentf-max-saved-items 500)
#+end_src

** Emacs ã‚¬ãƒ¼ãƒ™ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

ã‚¬ãƒ¼ãƒ™ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§Emacsã®ã¤ã‹ã†ãƒ¡ãƒ¢ãƒªã‚’æœ€é©åŒ–ã™ã‚‹. 

ã‚¬ãƒ¼ãƒ™ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒèµ°ã‚‹é–“éš”ãŒå¤šã‘ã‚Œã°é€”ä¸­ã§é‡ããªã‚‹ãŒ, ä½ã‚¹ãƒšãƒƒã‚¯PCã ã¨ã‚¬ãƒ¼ãƒ™ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã“ã¾ã‚ã«èµ°ã‚‰ã›ã‚‹ã“ã¨ã§å…¨ä½“çš„ã«è»½ãã™ã‚‹ã“ã¨ã‚‚. è¦èª¿æ•´. 

#+begin_src emacs-lisp :tangle yes
;; GCã‚’æ¸›ã‚‰ã—ã¦è»½ãã™ã‚‹.
;; (setq gc-cons-threshold (* gc-cons-threshold 10))
;; GCã®ä¸Šé™é–¾å€¤ã‚’ã‚ãˆã¦ä¸‹ã’ã‚‹(ä½ã‚¹ãƒšãƒƒã‚¯PC)
;; (setq gc-cons-threshold (/ gc-cons-threshold 10))

;; ã©ã†ã‚‚Doom ã ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å¤§ããªå€¤ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹æ¨¡æ§˜ãªã®ã§æˆ»ã™. 
;; (setq gc-cons-percentage 0.1)
;; (setq gc-cons-threshold 800000)
;; GCå®Ÿè¡Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™
(setq garbage-collection-messages nil)
#+end_src

** ace-window

3ã¤ä»¥ä¸Šã®windowã®é¸æŠãŒç•ªå·ã§ã§ãã‚‹. defaultã§C-x oã‚’ä¸Šæ›¸ãã—ã¦ã‚‹? C-u C-x o ã ã¨windowã‚’swapã§ãã‚‹(ace-swap-window).

* Email
#+begin_src emacs-lisp :tangle yes
;; Email
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

#+end_src

* Input

#+begin_src emacs-lisp :tangle yes
;; Input
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
(set-language-environment "Japanese")
(prefer-coding-system 'utf-8)
(set-default 'buffer-filecoding-system 'utf-8)

;; migemo
(use-package! migemo
  :config
  (setq migemo-command "cmigemo")
  (setq migemo-options '("-q" "--emacs" "-i" "\a"))
  (setq migemo-dictionary "/usr/share/migemo/utf-8/migemo-dict")
  (setq migemo-user-dictionary nil)
  (setq migemo-regex-dictionary nil)
  (setq migemo-coding-system 'utf-8-unix)
  (migemo-init))
#+end_src

** fcitx

#+begin_src emacs-lisp :tangle no
(use-package! fcitx
  :config
  (setq fcitx-remote-command "fcitx5-remote")
  (fcitx-aggressive-setup)
  ;; Linux ãªã‚‰ t ãŒæ¨å¥¨ã•ã‚Œã‚‹ã‚‚ã®ã®ã€fcitx5 ã«ã¯æœªå¯¾å¿œãªãŸã‚ã“ã“ã¯ nil
  (setq fcitx-use-dbus nil))
#+end_src

** artist mode

[[https://www.emacswiki.org/emacs/ArtistMode][EmacsWiki: Artist Mode]]

Emacsä¸Šã§ã‚«ãƒ¼ã‚½ãƒ«ã‚„ãƒã‚¦ã‚¹ã‚’ä½¿ã£ã¦ç·šãŒæ›¸ã‘ã‚‹.

- M-x artist-modeã§èµ·å‹•. 
- C-c C-c ã§çµ‚äº†.
- defaultã§ã¯ *.* ã‚’æå†™, Shiftã§ *-* ã«ãªã‚‹.

æ˜”ãªã‚“ã¡ã‚ƒã£ã¦elispã‚’æ›¸ã„ãŸã‘ã©, ãªã‚“ã defaultã§ã‚ã£ãŸã®ã‹.

ref: [[https://futurismo.biz/archives/1972/][ç§€ä¸¸ã®ã‚ˆã†ãªç½«ç·šãƒã‚¯ãƒ­ãªã„ã‹ãªã¨æ€ã£ã¦elispä½œæˆã—ãŸ | Futurismo]]

* Lang

ç·¨é›†è£œåŠ©ã®ä¸­ã§ã‚‚ç‰¹ã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ”¯æ´ã‚’ã¾ã¨ã‚ã‚‹.

** Generals

è¨€èªã«ä¾å­˜ã—ãªã„ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ”¯æ´ãƒ„ãƒ¼ãƒ«. 

*** smartparens

https://github.com/Fuco1/smartparens

Emacsã§ã‚«ãƒƒã‚³ã®å¯¾å¿œã‚’å–ã‚Šã¤ã¤ç·¨é›†ã‚’ã™ã‚‹minor-mode. pareditã‚’æ–°ã—ãrewriteã—ãŸ.

refs:

- https://ebzzry.com/en/emacs-pairs/
- http://kimi.im/2021-11-27-sexp-operations-in-emacs

[[https://github.com/hlissner/doom-emacs/blob/master/modules/config/default/%2Bemacs-bindings.el][doom emacsã®smartparenså®šç¾©]]. +bindings +smartparensã§æœ‰åŠ¹.

#+begin_src emacs-lisp :tangle no
;;; smartparens
(:after smartparens
  :map smartparens-mode-map
  "C-M-a"           #'sp-beginning-of-sexp
  "C-M-e"           #'sp-end-of-sexp
  "C-M-f"           #'sp-forward-sexp
  "C-M-b"           #'sp-backward-sexp
  "C-M-n"           #'sp-next-sexp
  "C-M-p"           #'sp-previous-sexp
  "C-M-u"           #'sp-up-sexp
  "C-M-d"           #'sp-down-sexp
  "C-M-k"           #'sp-kill-sexp
  "C-M-t"           #'sp-transpose-sexp
  "C-M-<backspace>" #'sp-splice-sexp)
#+end_src

è¶³ã‚Šãªã„ã®ã¯è‡ªåˆ†ã§å®šç¾©ã™ã‚‹å¿…è¦ã‚ã‚Š. ã¨ã„ã†ã‹ã„ã‚ã„ã‚å†å®šç¾©ã™ã‚‹ã‹...

#+begin_src emacs-lisp :tangle yes
(use-package! smartparens-config
  :bind
  ("C-<right>" . sp-forward-slurp-sexp)
  ("M-<right>" . sp-forward-barf-sexp)
  ("C-<left>"  . sp-backward-slurp-sexp)
  ("M-<left>"  . sp-backward-barf-sexp)
  ("C-M-w" . sp-copy-sexp)
  ("M-[" . sp-backward-unwrap-sexp)
  ("M-]" . sp-unwrap-sexp)
  :config
  (add-hook! 'clojure-mode-hook 'smartparens-strict-mode))
#+end_src

*** symbol-overlay

ã‚·ãƒ³ãƒœãƒ«ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ã‚­ãƒ¼å…¥åŠ›ã§åˆ¶å¾¡ã§ãã‚‹.

https://github.com/wolray/symbol-overlay/

ä½¿ã£ã¦ãªã„ã— companyã¨keybindãŒã‹ã¶ã£ãŸã®ã§ã„ã£ãŸã‚“å°å°.

#+begin_src emacs-lisp :tangle no
(use-package! symbol-overlay
  :config
  (global-set-key (kbd "M-i") 'symbol-overlay-put)
  (global-set-key (kbd "M-n") 'symbol-overlay-switch-forward)
  (global-set-key (kbd "M-p") 'symbol-overlay-switch-backward)
  (global-set-key (kbd "<f7>") 'symbol-overlay-mode)
  (global-set-key (kbd "<f8>") 'symbol-overlay-remove-all))
#+end_src

*** codic

ã‚ˆã„å¤‰æ•°åã‚’æ•™ãˆã¦ãã‚Œã‚‹webã‚µãƒ¼ãƒ“ã‚¹codicã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ. 

[[https://codic.jp/][codic - ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®ãƒãƒ¼ãƒŸãƒ³ã‚°è¾æ›¸]]

- M-x codic: è‹±èª => æ—¥æœ¬èª
- M-x codic-translate => æ—¥æœ¬èª => è‹±èª(è¦token)

codic-translateã‚’ä½¿ã†ã«ã¯tokenã‚’ codic-api-tokenã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹. 
ç¾çŠ¶ã¯"private/config.el"ã«æ›¸ã„ã¦èª­ã¿è¾¼ã‚“ã§ã„ã‚‹. 

#+begin_src emacs-lisp :tangle yes
(use-package! codic)
#+end_src

- [[https://github.com/emacsorphanage/codic][codic - GitHub]]
- [[https://futurismo.biz/archives/2538/][è‹±èªåŠ›ã‚’å‘ä¸Šã•ã›ãŸã„ã®ã§ã¾ãšã¯ Emacs ã‹ã‚‰ã¯ã˜ã‚ãŸ | Futurismo]]

** Clojure

ref: [[https://github.com/hlissner/doom-emacs/blob/develop/modules/lang/clojure/README.org][doom-emacs/README.org - GitHub]]

ã¨ã‚Šã‚ãˆãšï¼Œdoomã®clojureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æœ‰åŠ¹.

+ cider
+ clj-refactor
+ flycheck-clj-kondo

ãã®ä»–ï¼Œ

+ rainbow-delimiters, smartparensã¯doomã®coreãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã™ã§ã«ã¯ã„ã£ã¦ã„ã‚‹.
+ pereditã¯ciderã®ä¸­ã«å…¥ã£ã¦ã„ã‚‹.

#+begin_src emacs-lisp :tangle yes
;; ã‚„ã‚Šã™ãindent mode
(add-hook! 'clojure-mode-hook 'aggressive-indent-mode)
;; è‡ªå‹•ã§alignæ•´å½¢.
(setq clojure-align-forms-automatically t)

(use-package! cider
  :bind
  ;; desing journalç”¨ã«bindingè¿½åŠ 
  ("C-c C-v C-p" . cider-pprint-eval-defun-to-comment)
  ("C-c C-v M-p" . cider-pprint-eval-last-sexp-to-comment)
  :config
  ;; connectã¨ã¨ã‚‚ã«REPL bufferã‚’è¡¨ç¤º.
  (setq  cider-repl-pop-to-buffer-on-connect t)
  ;; replã« å‡ºåŠ›ã—ã™ãã¦EmacsãŒãƒãƒ³ã‚°ã™ã‚‹ã®ã‚’é˜²ã.
  (setq  cider-repl-buffer-size-limit 100)

  ;; companyã§ã®ã‚ã„ã¾ã„è£œå®Œ.
  (add-hook 'cider-repl-mode-hook #'cider-company-enable-fuzzy-completion)
  (add-hook 'cider-mode-hook #'cider-company-enable-fuzzy-completion)

  ;; ã†ã¾ãã†ã”ã‹ãªã„ãª.. 
  (setq cider-special-mode-truncate-lines nil)
  ;; (add-hook 'cider-stacktrace-mode-hook (lambda () (setq truncate-lines nil)))
  ;; (add-hook 'cider-inspector-mode-hook (lambda () (setq truncate-lines nil)))

  ;; stack-frameè¡¨ç¤ºã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é™å®š
  (setq cider-stacktrace-default-filters '(project))

  ;; cider-connectã§å›ºå®športã‚’é¸æŠå€™è£œã«è¡¨ç¤º.
  ;; å›ºå®športè‡ªä½“ã¯ tools.depsã‹ã‚‰ã®nreplèµ·å‹•æ™‚optionã§æŒ‡å®š.
  (setq cider-known-endpoints '(("kotori" "0.0.0.0" "34331")))

  ;; REPLã«è¡¨ç¤ºã—ã¾ãã‚Šã§ãƒãƒ³ã‚°ã‚’é˜²ã
  (setq cider-print-quota 1024)
)
#+end_src

*** clj-refactor

Emacs CIDERã§Clojureã‚’æ›¸ããŸã‚ã®ä¾¿åˆ©ãªãƒ•ã‚¡ã‚¯ã‚¿ãƒ„ãƒ¼ãƒ«æä¾›.

https://github.com/clojure-emacs/clj-refactor.el

#+begin_src emacs-lisp :tangle yes
(add-hook! clojure-mode
  (clj-refactor-mode 1)
  (yas-minor-mode 1) ; for adding require/use/import statements
  ;; This choice of keybinding leaves cider-macroexpand-1 unbound
  (cljr-add-keybindings-with-prefix "C-c C-m")

  ;; cljr-rename-symbolã§ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæŠ‘æ­¢. 
  ;; ã©ã†ã‚‚åˆå›å®Ÿè¡ŒãŒé…ãï¼’å›ç›®ã‹ã‚‰ã¯å•é¡Œãªã„. 
  (setq cljr-warn-on-eval nil)
)
#+end_src

- cljr-clean-ns
  - namespaceã‚’æ•´ç†, cljr-project-cleanã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã«é©ç”¨.
- cljr-rename-symbol 
  - ã‚·ãƒ³ãƒœãƒ«(é–¢æ•°åã‚„å¤‰æ•°åå«ã‚€). 
  - ã©ã†ã‚‚é…ã„ã®ã¦LSPã®ã»ã†ãŒã“ã“ã¯ã„ã„ã®ã‹ã‚‚. 

*** cljstyle: formatter for Clojure

ref: [[https://qiita.com/lagenorhynque/items/a5d83b4a36a1cf1cacbe][GitHub]]

Doom Emascã® editor/format moduleã¨é€£æºå¯èƒ½.
Clojureã ã¨defaultãŒ node-cljfmtãªã®ã§cljstyleã‚’ä½¿ã†ã«ã¯è¨­å®šãŒå¿…è¦.

#+begin_src emacs-lisp :tangle yes
(add-hook! clojure-mode
  (set-formatter! 'cljstyle "cljstyle pipe" :modes '(clojure-mode))
  (add-hook 'before-save-hook 'format-all-buffer t t))
#+end_src

*** clj-kondo: linter for Clojure

ref: [[https://qiita.com/lagenorhynque/items/dd9d6a1d97cbea738bc0][GitHub]]

*** portal

Data Visualization for Clojure.

ref. https://github.com/djblue/portal

#+begin_src emacs-lisp :tangle yes
(defun portal.api/open ()
  (interactive)
  (cider-nrepl-sync-request:eval
   "(require 'portal.api) (portal.api/tap) (portal.api/open)"))

(defun portal.api/clear ()
  (interactive)
  (cider-nrepl-sync-request:eval "(portal.api/clear)"))

(defun portal.api/close ()
  (interactive)
  (cider-nrepl-sync-request:eval "(portal.api/close)"))
#+end_src

** rest

#+begin_src emacs-lisp :tangle yes
(use-package! restclient
  :mode (("\\.rest\\'" . restclient-mode)
         ("\\.restclient\\'" . restclient-mode)))
(use-package! ob-restclient
  :after org restclient
  :init
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((restclient . t))))
#+end_src

* Os

#+begin_src emacs-lisp :tangle yes
;; OS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
#+end_src

** EXWM

Emacsã®Window Manager.

ã‚‚ã¯ã‚„ã“ã‚Œã‚’ã¤ã‹ã†ã¨ä¸–ç•ŒãŒEmacsã«ãªã‚ŠEmacs å¼•ãã“ã‚‚ã‚Šç”Ÿæ´»ãŒå®Œæˆã™ã‚‹.

#+begin_src emacs-lisp :tangle yes
(use-package! exwm
  :after counsel
  :init
  (setq counsel-linux-app-format-function
        #'counsel-linux-app-format-function-name-only)
  (map!
        :leader
        :prefix ("z" . "exwm")
        "c" #'exwm-reset
        "o" (lambda (command)
                         (interactive (list (read-shell-command "$ ")))
                         (start-process-shell-command command nil command))
        "z" #'exwm-workspace-switch
        "m" #'exwm-workspace-move-window
        "a" #'counsel-linux-app
        "s" #'counsel-search  ;; open chrome and search
        )
  (add-hook 'exwm-input--input-mode-change-hook
            'force-mode-line-update)
  (add-hook 'exwm-update-class-hook
            (lambda ()
              (exwm-workspace-rename-buffer exwm-class-name)))
  ;; ã©ã†ã‚‚Chromeã‚’ç«‹ã¡ä¸Šã’ã‚‹ã¨ãƒãƒ³ã‚°ã™ã‚‹ã®ã§ç„¡åŠ¹ã«ã—ã¦ãŠã.
  (winner-mode -1)

  :config
  (require 'exwm-randr)
  (setq exwm-randr-workspace-output-plist '(0 "HDMI-1"))
  (add-hook
   'exwm-randr-screen-change-hook
   (lambda ()
     (start-process-shell-command
      "xrandr" nil "xrandr --output HDMI-1 --primary --right-of eDP-1 --auto")))
  (exwm-randr-enable)

  (require 'exwm-systemtray)
  (exwm-systemtray-enable)

  ;; edit-serverçš„ãª. C-c 'ã§ç·¨é›†ã§ãã‚‹ã®ã§ã‚ˆã‚Šbetter
  ;; ä¸€åº¦å…¥åŠ›ã—ãŸã‚‚ã®ã‚’å†åº¦é–‹ãã¨æ–‡å­—åŒ–ã‘ã™ã‚‹.
  (require 'exwm-edit)
  (setq exwm-edit-split t)

  (setf epg-pinentry-mode 'loopback)
  (defun pinentry-emacs (desc prompt ok error)
    (let ((str (read-passwd
                (concat (replace-regexp-in-string
                         "%22" "\""
                         (replace-regexp-in-string
                          "%0A" "\n" desc)) prompt ": "))))
      str))

  ;; from https://github.com/ch11ng/exwm/wiki/Configuration-Example
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (scroll-bar-mode -1)
  (fringe-mode 1)

  ;; google-chromeã‚’èµ·å‹•ã™ã‚‹ã¨mouse on menu-barãŒpopupã—ã¦ãƒãƒ³ã‚°ã™ã‚‹å¯¾ç­–
  ;; https://stackoverflow.com/questions/17280845/emacs-disable-pop-up-menus-on-mouse-clicks
  (fset 'menu-bar-open nil)
  (fset 'x-menu-bar-open nil)

  ;; Turn on `display-time-mode' if you don't use an external bar.
  (setq display-time-default-load-average nil)
  (display-time-mode t)
  (display-battery-mode 1)

  (setq exwm-workspace-number 2)

  (setq exwm-input-simulation-keys
        '(([?\C-b] . [left])
          ;; Chromeãƒšãƒ¼ã‚¸å†…æ¤œç´¢ã®ãŸã‚ã«ç©ºã‘ã‚‹          
          ;; ([?\C-f] . [right])
          ;; 2022.03.23 ã‚„ã£ã±ã‚Šè§£é™¤. ã©ã†ã‚‚C-fãŒã‚¹ãƒ ãƒ¼ã‚ºãªæ“ä½œã‚’é˜»å®³ã™ã‚‹.
          ;; ãƒšãƒ¼ã‚¸å†…æ¤œç´¢ã¯Surfingkeysã¨ã„ã†Extensionã‚’åˆ©ç”¨(/).
          ([?\C-f] . [right])
          ([?\C-p] . [up])
          ([?\C-n] . [down])
          ([?\C-a] . [home])
          ([?\C-e] . [end])
          ([?\M-v] . [prior])
          ([?\C-v] . [next])
          ([?\C-d] . [delete])
          ([?\C-m] . [return])
          ([?\C-h] . [backspace])
          ([?\C-k] . [S-end delete])))

  (exwm-enable))
#+end_src

* Org-mode

ã”å­˜çŸ¥ï¼

- [[https://github.com/tsu-nera/dotfiles/blob/master/.emacs.d/inits/50_org-mode.org][dotfiles/50_org-mode.org at master Â· tsu-nera/dotfiles Â· GitHub]]
  - æ˜”ã®è¨­å®š. ã™ã“ã—ãšã¤ç§»æ¤ã—ãŸã„.

** ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹é–¢é€£ã®å®šç¾©ã¯ã¾ã¨ã‚ã¦ã“ã“ã§å®Ÿæ–½.

#+begin_src emacs-lisp :tangle yes
(after! org
  (setq org-directory "~/keido")


  (defconst my/gtd-projects-file 
    "~/keido/notes/gtd/gtd_projects.org")
  (defconst my/inbox-file "~/keido/inbox/inbox.org")
  (defconst my/daily-journal-dir "~/keido/notes/journals/daily")
  (defconst my/project-journal-bakuchi
    "~/repo/bakuchi-doc/notes/journal.org")
  (defconst my/project-journal-deepwork
    "~/keido/notes/zk/journal_deepwork.org")

  ;; org-captureã®targetã¯è©³ã—ãã„ã‚ã„ã‚è¨­å®šã™ã‚‹ã®ã§defaultã¯ä¸è¦.
  ;; (setq org-default-notes-file "gtd/gtd_projects.org")

  ;; ä½•ã§ã‚‚ã‹ã‚“ã§ã‚‚ agenda ã™ã‚‹ã¨æ€ã„ã®ã§å³é¸.
  ;; org-journalã®æ©Ÿèƒ½ã§ã“ã®ã»ã‹ã«ä»Šæ—¥ã®journal fileãŒè¿½åŠ ã•ã‚Œã‚‹.
  (setq org-agenda-files
        (list
         my/gtd-projects-file
         my/project-journal-bakuchi
         my/project-journal-deepwork))
)
#+end_src

** Basics

#+begin_src emacs-lisp :tangle yes
;; Org mode
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; ã‚¹ãƒãƒ›ã¨ã®å…±æœ‰ã®ãŸã‚, github ã‚’ clone ã—ãŸã‚‚ã®ã‚’ Dropbox ã«ç½®ã„ã¦$HOME ã« symlink ã—ã¦ã„ã‚‹.
(after! org

  (setq org-return-follows-link t) ;; Enter ã§ãƒªãƒ³ã‚¯å…ˆã¸ã‚¸ãƒ£ãƒ³ãƒ—
  (setq org-use-speed-commands t)  ;; bullet ã«ã‚«ãƒ¼ã‚½ãƒ«ãŒã‚ã‚‹ã¨é«˜é€Ÿç§»å‹•
  (setq org-hide-emphasis-markers t) ;; * ã‚’æ¶ˆã—ã¦è¡¨ç¤º.
  (setq org-pretty-entities t)

  ;; ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºã‚’è‹±èªè¡¨è¨˜ã¸
  (setq system-time-locale "C") 

  ;; defaultã§ã¯Footnotes
  (setq org-footnote-section "Footnotes")
  (setq org-footnote-auto-adjust t)

  ;; M-RET ã®æŒ™å‹•ã®èª¿æ•´
  ;; t ã ã¨ subtree ã®æœ€çµ‚è¡Œã« heading ã‚’æŒ¿å…¥
  ;; nil ã ã¨ current point ã«æŒ¿å…¥
  ;; ãªãŠï¼ŒC-RET ã ã¨ subtree ã®æœ€çµ‚è¡Œã«æŒ¿å…¥ã•ã‚Œ
  ;; C-S-RET ã ã¨æ‰‹å‰ã«æŒ¿å…¥ã•ã‚Œã‚‹.
  (setq org-insert-heading-respect-content nil)

  (setq org-startup-indented t)
  (setq org-indent-mode-turns-on-hiding-stars nil)

  (setq org-startup-folded 'showall) ;; è¦‹å‡ºã—ã®éšå±¤æŒ‡å®š
  (setq org-startup-truncated nil) ;; é•·ã„æ–‡ã¯æŠ˜ã‚Šè¿”ã™.

  ;; electric-indent ã¯ org-mode ã§èª¤ä½œå‹•ã®å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã®ã“ã¨
  ;; ãŸã¾ã«ã„ããªã‚Š org-mode ã® tree æ§‹é€ ãŒå£Šã‚Œã‚‹.ã¨ã‚Šã‚ãˆãšè¨­å®šã—ã¦ãŠã
  ;; ã“ã®è¨­å®šã®åŠ¹æœãŒä»¥ä¸‹ã®è¨˜äº‹ã§ gif ã§ã‚ã‚‹.
  ;; https://www.philnewton.net/blog/electric-indent-with-org-mode/
  (add-hook! org-mode (electric-indent-local-mode -1)))
#+end_src

** org-agenda

#+begin_src emacs-lisp :tangle yes
(after! org
  ;; org-agenda
  (setq org-refile-targets '((org-agenda-files :maxlevel . 3)))
  ;; æ™‚é–“è¡¨ç¤ºãŒ 1 æ¡ã®æ™‚, 0 ã‚’ã¤ã‘ã‚‹
  (setq org-agenda-time-leading-zero t) 
  (setq calendar-holidays nil) ;; ç¥æ—¥ã‚’åˆ©ç”¨ã—ãªã„.
  (setq org-log-done 'time);; å¤‰æ›´æ™‚ã®çµ‚äº†æ™‚åˆ»è¨˜éŒ².

  ;; ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„ãƒ‡ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã¯ DONE ã«ãªã£ã¦ã„ã‚Œã°è¡¨ç¤ºã™ã‚‹
  (setq org-agenda-skip-deadline-if-done nil)
  (setq org-agenda-skip-scheduled-if-done nil)

  ;; default ã§ logbook ã‚’è¡¨ç¤º
  (setq org-agenda-include-inactive-timestamps t)
  ;; default ã§ æ™‚é–“ã‚’è¡¨ç¤º
  (setq org-agenda-start-with-log-mode t) 

  ;; org-agenda speedup tips
  ;; https://orgmode.org/worg/agenda-optimization.html


  ;; æœŸé–“ã‚’é™å®š
  (setq org-agenda-span 7)
  ;; Inhibit the dimming of blocked tasks:
  (setq org-agenda-dim-blocked-tasks nil)
  ;; Inhibit agenda files startup options:
  (setq org-agenda-inhibit-startup nil)
  ;; Disable tag inheritance in agenda:
  (setq org-agenda-use-tag-inheritance nil))
#+end_src

** TODOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ‹¡å¼µ

TODOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º. M-x C-c t.

ref. [[https://orgmode.org/manual/TODO-Extensions.html][TODO Extensions (The Org Manual)]]

#+begin_src emacs-lisp :tangle yes
(setq org-todo-keywords
      '((sequence "TODO(t)" "NEXT(n)" "WAIT(w)" "|" "DONE(d)")
        (sequence "âœ…(c)" "ğŸ’¡(b)" "ğŸ“(r)" "ğŸ”(s)" "ğŸ“Š(a)" "ğŸ”¬(e)" "ğŸ—£(h)" "|")
        (sequence "ğŸ“(z)" "ğŸ“(m)" "ğŸ”—(l)" "âš™(p)"  "|")))
#+end_src

** org-capture

[[https://orgmode.org/manual/Capture-templates.html][Capture templates (The Org Manual)]]

#+begin_src emacs-lisp :tangle yes
(after! org
  (setq org-capture-templates
        '(("i" "ğŸ“¥ Inbox" entry
           (file my/inbox-file) 
           "* %?\nCaptured On: %U\n"
           :klll-buffer t)
          ("I" "ğŸ“¥+ğŸŒ Inbox+Browser" entry
           (file my/inbox-file)
           "* %?\nSource: [[%:link][%:description]]\nCaptured On: %U\n"
           :klll-buffer t)
          ("q" "ğŸ“¥+ğŸŒ Inbox+Browser(quote)" entry
           (file my/inbox-file)
           "* %?\nSource: [[%:link][%:description]]\nCaptured On: %U\n%i\n"
           :klll-buffer t))))
#+end_src

*** capture to daily journal

#+begin_src emacs-lisp :tangle yes
(defun my/create-date-org-file (path)
  (expand-file-name (format "%s.org" (format-time-string "%Y-%m-%d")) path))

;; ç¾çŠ¶ã¤ã‹ã£ã¦ãªã„ã®ã§ãƒã‚¹ã‚¯
;; (defun my/create-timestamped-org-file (path)
;;   (expand-file-name (format "%s.org" (format-time-string "%Y%m%d%H%M%S")) path))

(after! org
  (setq org-capture-templates
        (append 
          '(("c" "â˜‘ Planning" plain
             (file+headline
              (lambda () 
                (my/create-date-org-file my/daily-journal-dir))
              "Planning")
             "%?"
             :unnarrowed t
             :kill-buffer t)
            ("t" "ğŸ¤” Thought" entry
             (file+headline
              (lambda () 
                (my/create-date-org-file my/daily-journal-dir))
              "Thoughts")
             "* ğŸ¤” %?\n%T"
             :empty-lines 1
             :unnarrowed t
             :kill-buffer t)
            ("T" "ğŸ¤”+ğŸ“ƒ Thought+Ref" entry
             (file+headline
              (lambda () 
                (my/create-date-org-file my/daily-journal-dir))
              "Thoughts")
             "* ğŸ¤” %?\n%T from %a\n"
             :empty-lines 1
             :unnarrowed t
             :kill-buffer t)
            ("l" "ğŸ¤”+ğŸŒ Thought+Browser" entry
             (file+headline
              (lambda () 
                (my/create-date-org-file my/daily-journal-dir))
              "Thoughts")
             "* ğŸ¤” %?\n%T from [[%:link][%:description]]\n"
             :empty-lines 1
             :unnarrowed t
             :kill-buffer t)
            ("p" "ğŸ… Pomodoro" entry
             (file+headline
              (lambda () 
                (my/create-date-org-file my/daily-journal-dir))
              "DeepWork")
             "* ğŸ… %?\n%T"
             :empty-lines 1
             :unnarrowed t
             :kill-buffer t)
            ("r" "ğŸ§˜ Recovery" entry
             (file+headline
              (lambda () 
                (my/create-date-org-file my/daily-journal-dir))
              "Recovery")
             "* ğŸ§˜ %?\n%T"
             :empty-lines 1
             :unnarrowed t
             :kill-buffer t)
            ("j" "ğŸ–Š Journal" plain
             (file 
              (lambda ()
                (my/create-date-org-file my/daily-journal-dir)))
             "%?"
             :empty-lines 1
             :unnarrowed t
             :kill-buffer t)
            ("J" "ğŸ–Š+ğŸ“ƒ Journal+Ref" plain
             (file 
              (lambda ()
                (my/create-date-org-file my/daily-journal-dir)))
             "%?\n%a"
             :empty-lines 1
             :unnarrowed t
             :kill-buffer t)
            ("L" "ğŸ–Š+ğŸŒ Journal+Browser" plain
             (file 
              (lambda ()
                (my/create-date-org-file my/daily-journal-dir)))
             "%?\nSource: [[%:link][%:description]]\nCaptured On: %U\n"
             :empty-lines 1
             :unnrrowed t
             :kill-buffer t)) org-capture-templates)))
#+end_src

*** capture to project journal

#+begin_src emacs-lisp :tangle yes
(after! org
  (setq org-capture-templates
        (append 
        '(("b" "ğŸ–Š bakuchi entry" entry
           (file+olp+datetree my/project-journal-bakuchi)
           "* %?\nCaptured On: %T\n"
           :unnarrowed t
           :empty-lines 1
           :tree-type week
           :klll-buffer t)
          ("B" "ğŸ–Š+âœ bakuchi append" plain
           (file my/project-journal-bakuchi)
           "%?"
           :empty-lines 1
           :unnarrowed t
           :jump-to-captured t
           :kill-buffer t)
          ("d" "ğŸ–Š DeepWork entry" entry
           (file+olp+datetree my/project-journal-deepwork)
           "* %?\nCaptured On: %T\n"
           :unnarrowed t
           :empty-lines 1
           :tree-type week
           :klll-buffer t)) org-capture-templates)))
#+end_src

#+RESULTS:
| b | ğŸ–Š bakuchi entry | entry | (file+olp+datetree my/project-journal-bakuchi) | * %? |

*** Google Chrome Extention: Org Capture

Google Chromeã«ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§Web PageãŒorg-captureã¨é€£æº([[https://chrome.google.com/webstore/detail/org-capture/kkkjlfejijcjgjllecmnejhogpbcigdc?hl=ja][link]]).

Chromeã§Ctrl + Shift + Lã§èµ·å‹•.

** org-export(ox)

Org-modeã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹æ©Ÿèƒ½. ox package.

ã‚µãƒ–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ•°å¤šãã‚ã‚‹ãŒ, ã“ã“ã§ã¯å…±é€šæƒ…å ±ã¾ã¨ã‚.

org-export-with-xxxã¨ã„ã†è¨­å®šé …ç›®ã§ã„ã‚ã„ã‚åˆ¶å¾¡ã§ãã‚‹.

[[https://orgmode.org/manual/Export-Settings.html][Export Settings (The Org Manual)]]

ã—ã‹ã—, ä»¥ä¸‹ãŒè‡ªå‹•çš„ã«å¤‰æ›ã•ã‚Œã¦ã—ã¾ã†...ã“ã®æ–‡å­—ã«å¯¾ã™ã‚‹åˆ¶å¾¡æ–¹æ³•ãŒè¦‹ã¤ã‹ã‚‰ãªã„...

- > &gt; 
- < &lt;
- & &amp;

ã©ã†ã‚‚HTML tagã¨ã‹HTML Entitiesã¨å‘¼ã°ã‚Œã¦ã„ã‚‹(ref. [[https://orgmode.org/org.html#Headlines-in-HTML-export][The Org Manual]]).

#+begin_quote
The HTML export back-end transforms â€˜<â€™ and â€˜>â€™ to â€˜&lt;â€™ and â€˜&gt;â€™.
#+end_quote

ãŸã ox-html.elã«ã¯ã“ã†ã„ã†è¨­å®šãŒdefaultã§ã•ã‚Œã¦ã„ã‚‹. ä»–ã®exportã¸ã®ç§»æ¤ãŒå¿…è¦.

#+begin_src emacs-lisp :tangle no
(setq org-export-html-protect-char-alist
  '(("&" . "&amp;")
    ("<" . "&lt;")
    (">" . "&gt;"))
#+end_src

[[https://orgmode.org/manual/Advanced-Export-Configuration.html][Advanced Export Configuration (The Org Manual)]]

ãŠãã‚‰ã, exportã‚’ã‹ã‘ãŸã‚ã¨ã«hooké–¢æ•°ã«ã‚ˆã£ã¦æ–‡å­—åˆ—å¤‰æ›ãŒå¿…è¦.

#+begin_src emacs-lisp :tangle yes
(after! ox
  (defun my/hugo-filter-html-amp (text backend info)
    (when (org-export-derived-backend-p backend 'hugo)
      (replace-regexp-in-string "&amp;" "&" text)))
  (defun my/hugo-filter-html-gt (text backend info)
    (when (org-export-derived-backend-p backend 'hugo)
      (replace-regexp-in-string "&gt;" ">" text)))
  (defun my/hugo-filter-html-lt (text backend info)
    (when (org-export-derived-backend-p backend 'hugo)
      (replace-regexp-in-string "&lt;" "<" text)))
  (add-to-list
   'org-export-filter-plain-text-functions 'my/hugo-filter-html-amp)
  (add-to-list
   'org-export-filter-plain-text-functions 'my/hugo-filter-html-gt)
  (add-to-list
   'org-export-filter-plain-text-functions 'my/hugo-filter-html-lt))
#+end_src

*** org-preview-html

ä»Šã®Emacs, xwidgetç”¨ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ãªã‹ã£ãŸãª...

ewwã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ãã‚‹.

#+begin_src emacs-lisp :tangle yes
(use-package! org-preview-html)
#+end_src

*** ox-hugo

Org-modeã§æ›¸ã„ãŸãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’Hugoã«ã‚ã£ãŸMarkdownå½¢å¼ã«å¤‰æ›ã™ã‚‹.

ãƒ–ãƒ­ã‚°Futurismoã¯Org-modeã§åŸ·ç­†ã—ã¦ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦Markdownã«å¤‰æ›ã—ã¦ã„ã‚‹.

#+begin_src emacs-lisp :tangle yes
(use-package! ox-hugo
  :after ox
  :bind
  ;; org-roamã®exportã§å¤šæ§˜ã™ã‚‹ã®ã§C-c rã®prefixã‚’ã¤ã‘ã¦ãŠã.
  ("C-c r e" . org-hugo-export-to-md)
  :config
  (setq org-hugo-auto-set-lastmod t)
  ;; ãªã‚“ã‹.dir-locals.elã«æ›¸ã„ã¦ã‚‚åæ˜ ã—ã¦ãã‚Œãªã„ãª. 
  (setq org-export-with-author nil)
  ;; org-hugo-get-idã‚’ä½¿ã†ã‚ˆã†ã«è¨­å®š.
  (setq org-hugo-anchor-functions 
        '(org-hugo-get-page-or-bundle-name
          org-hugo-get-custom-id
          org-hugo-get-id
          org-hugo-get-md5
          ;; æ—¥æœ¬èªã«ä¸å‘ããªæ°—ãŒã™ã‚‹
          ;; org-hugo-get-heading-slug
          )))
#+end_src

ã“ã®ox-hugoã§å‡ºåŠ›ã•ã‚Œã‚‹Markdownã¯ã©ã†ã‚‚ãƒªã‚¹ãƒˆè¡¨ç¤ºã§ã‚¹ãƒšãƒ¼ã‚¹ãŒ4ã¤å…¥ã£ã¦ã—ã¾ã†. GitHub Favorite Markdownã®ã‚ˆã†ã«ãƒªã‚¹ãƒˆã§ã®ã‚¹ãƒšãƒ¼ã‚¹ï¼’ã§ã‚ã£ã¦æ¬²ã—ã„ã‚‚ã®ã®è§£æ±ºæ–¹æ³•ãŒè¦‹ã¤ã‹ã‚‰ãªã„.

*** ox-rst

Org-modeã§æ›¸ã„ãŸWikiç”¨ã®ãƒšãƒ¼ã‚¸ã‚’Sphinxã§å…¬é–‹ã™ã‚‹ãŸã‚ã«reSTå½¢å¼ã«å¤‰æ›ã™ã‚‹.

ãƒªãƒ³ã‚¯å½¢å¼ãŒã†ã¾ãå¤‰æ›ã§ããªã„ã®ã§ã‘ã£ã“ã†å¼·å¼•ã«å¤‰æ›ã—ã¦ã„ã‚‹(ã‚‚ã†å°‘ã—ã†ã¾ãæ”¹å–„ã—ãŸã„).

#+begin_src emacs-lisp :tangle yes
(use-package! ox-rst
  :after ox)

(after! ox
  (defun my/rst-to-sphinx-link-format (text backend info)
    (when (and (org-export-derived-backend-p backend 'rst) (not (search "<http" text)))
      (replace-regexp-in-string "\\(\\.org>`_\\)" ">`" (concat ":doc:" text) nil nil 1)))
  (add-to-list 'org-export-filter-link-functions
               'my/rst-to-sphinx-link-format))
#+end_src

*** ox-qmd

GitHub Flavored Markdown.

æ¨™æº–ã®Markdownã®å‡ºåŠ›ã ã¨è¦‹ãŸç›®ãŒæ‚ªã„. Bufferã«æ›¸ãå‡ºã—ã¦GitHubã¨ã‹ã«ã‚³ãƒ”ãƒšã™ã‚‹ã¨ãç”¨ã«ã„ã‚Œã¦ãŠã.

ref. [[https://qiita.com/0x60df/items/3cde67967e3db30d9afe][Org-modeã‹ã‚‰Qiitaæº–æ‹ ã®Markdownã‚’exportã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸ - Qiita]]

#+begin_src emacs-lisp :tangle yes
(use-package! ox-qmd)
#+end_src

ox-gfmã¯2017ã‹ã‚‰ãƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ãªã„ã®ã§ã‚„ã‚ã¨ãã‹([[https://github.com/larstvei/ox-gfm/issues/44][ref]]).

** org-babel(ob)

Org-modeã®ãªã‹ã§Literature Programming.

åŸºæœ¬æ“ä½œ:

- C-c C-, ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®æŒ¿å…¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‘¼ã³å‡ºã—(org-insert-structure-tempate)
- C-c C-c ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ(org-babel-execute-src-block)
- C-c C-o ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œçµæœã‚’é–‹ã(org-babel-open-src-block-result)
- C-c ' ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç·¨é›†(org-edit-src-code)
  - ã©ã†ã‚‚Eoom Emacsã ã¨ keybindingãŒå¤–ã‚Œã„ã¦ã‚‹.
  - C-c l '(org-edit-special)ã§é–‹ã.

#+begin_src emacs-lisp :tangle yes
(after! org
  ;; https://stackoverflow.com/questions/53469017/org-mode-source-editing-indents-code-after-exiting-source-code-block-editor
  ;; ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ. default 2ã«ãªã£ã¦ã„ã‚‹ã¨ã¸ã‚“ãªéš™é–“ãŒå…ˆé ­ã«å…¥ã‚‹.
  (setq org-edit-src-content-indentation 0)
  (setq org-src-preserve-indentation t)
  ;; TABã®æŒ™å‹•
  (setq org-src-tab-acts-natively t)

  ;; org-babel ã®ã‚½ãƒ¼ã‚¹ã‚’ã‚­ãƒ¬ã‚¤ã«è¡¨ç¤º.
  (setq org-src-fontify-natively t)
  (setq org-fontify-whole-heading-line t)

  ;; è©•ä¾¡ã§ã„ã¡ã„ã¡è³ªå•ã•ã‚Œãªã„ã‚ˆã†ã«.
  (setq org-confirm-babel-evaluate nil)

  ;; org-babel ã§ å®Ÿè¡Œã—ãŸè¨€èªã‚’æ›¸ã. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ emacs-lisp ã ã‘.
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((lisp . t)
     (shell . t)
     (clojure . t)))
  (org-defkey org-mode-map "\C-u\C-x\C-e" 'cider-eval-last-sexp)
)
#+end_src

refs:

- [[https://orgmode.org/manual/Key-bindings-and-Useful-Functions.html][org-babel Key bindings and Useful Functions (The Org Manual)]]
- [[https://misohena.jp/blog/2017-10-26-how-to-use-code-block-of-emacs-org-mode.html][org-modeã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯(Babel)ã®ä½¿ã„æ–¹ | Misohena Blog]]

*** ob-html

[[https://misohena.jp/blog/2021-08-03-execute-html-in-org-mode-code-blocks.html][org-modeã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã§HTMLã‚’ã€Œå®Ÿè¡Œã€ã™ã‚‹ | Misohena Blog]]

#+begin_src emacs-lisp :tangle yes
(use-package! ob-html
  :after org
  :config
  ;; C-c C-o ã§ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã.
  (org-babel-html-enable-open-src-block-result-temporary))
#+end_src

** org-superstar

org-superstar-mode(+pretty option)é–¢é€£.

#+begin_src emacs-lisp :tangle yes
(after! org
;;; Titles and Sections
;; hide #+TITLE:
;; (setq org-hidden-keywords '(title))
;; set basic title font
;; (set-face-attribute 'org-level-8 nil :weight 'bold :inherit 'default)
;; Low levels are unimportant => no scaling
;; (set-face-attribute 'org-level-7 nil :inherit 'org-level-8)
;; (set-face-attribute 'org-level-6 nil :inherit 'org-level-8)
;; (set-face-attribute 'org-level-5 nil :inherit 'org-level-8)
;; (set-face-attribute 'org-level-4 nil :inherit 'org-level-8)
;; Top ones get scaled the same as in LaTeX (\large, \Large, \LARGE)
;; (set-face-attribute 'org-level-3 nil :inherit 'org-level-8 :height 1.2) ;\large
;; (set-face-attribute 'org-level-2 nil :inherit 'org-level-8 :height 1.44) ;\Large
;; (set-face-attribute 'org-level-1 nil :inherit 'org-level-8 :height 1.728) ;\LARGE
;; Only use the first 4 styles and do not cycle.
(setq org-cycle-level-faces nil)

;; orgã®éšå±¤ã®è‰²åˆ†ã‘ãƒ¬ãƒ™ãƒ«.
;; (setq org-n-level-faces 8)

;; Document Title, (\huge)
;; (set-face-attribute 'org-document-title nil
;;                    :height 2.074
;;                    :foreground 'unspecified
;;                    :inherit 'org-level-8)

;; (with-eval-after-load 'org-superstar
;;  (set-face-attribute 'org-superstar-item nil :height 1.2)
;;  (set-face-attribute 'org-superstar-header-bullet nil :height 1.2)
;;  (set-face-attribute 'org-superstar-leading nil :height 1.3))
;; Set different bullets, with one getting a terminal fallback.
(setq org-superstar-headline-bullets-list '("â– " "â—†" "â—" "â–·"))
;; (setq org-superstar-special-todo-items t)

;; Stop cycling bullets to emphasize hierarchy of headlines.
(setq org-superstar-cycle-headline-bullets nil)
;; Hide away leading stars on terminal.
;; (setq org-superstar-leading-fallback ?\s)
(setq inhibit-compacting-font-caches t))
#+end_src

** Org-roam

Zettelkasten Methodã®Org-roamå®Ÿè£….

#+begin_src emacs-lisp :tangle yes
;; org-roam
(setq org-roam-directory (file-truename "~/keido/notes"))
(setq org-roam-db-location (file-truename "~/keido/db/org-roam.db"))

(use-package! org-roam
  :after org
  :init
  (setq org-roam-v2-ack t)
  (map!
        :leader
        :prefix ("r" . "org-roam")
        "f" #'org-roam-node-find
        "i" #'org-roam-node-insert
        "l" #'org-roam-buffer-toggle
        "t" #'org-roam-tag-add
        "T" #'org-roam-tag-remove
        "a" #'org-roam-alias-add
        "A" #'org-roam-alias-remove
        "r" #'org-roam-ref-add
        "R" #'org-roam-ref-remove
        "o" #'org-id-get-create
        "u" #'my/org-roam-update
        "D" #'org-roam-dailies-goto-today
        )
  :custom
  ;;ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ ID ã«ã™ã‚‹.
  (org-roam-capture-templates
   '(("z" "ğŸ“ Zettelkasten" plain "%?"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ“${title}\n#+filetags: :CONCEPT:\n")
      :unnarrowed t)
     ("w" "ğŸ“ Wiki" plain "%?"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ“${title}\n#+filetags: :WIKI:\n")
      :unnarrowed t)
     ("t" "ğŸ”– Tag" plain "%?"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ”–${title}\n#+filetags: :TAG:\n")
      :unnarrowed t)
     ("h" "ğŸ‘¨ Person" plain "%?"
      :target (file+head 
               "zk/%<%Y%m%d%H%M%S>.org"                 
               "#+title:ğŸ‘¨${title}\n#+filetags: :PERSON:\n")
      :unnarrowed t)
     ("f" "ğŸ“‚ TOC" plain "%?"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ“‚${title}\n#+filetags: :TOC:\n")
      :unnarrowed t)
     ("m" "ğŸ› MOC" plain "%?"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ›${title}\n#+filetags: :MOC:\n")
      :unnarrowed t)
     ("i" "âœ… Issue" plain "%?"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                        "#+title:âœ…${title}\n#+filetags: :ISSUE:\n")
      :unnarrowed t)
     ("p" "âš™ Pattern" plain "%?"
      :target (file+head 
               "zk/%<%Y%m%d%H%M%S>.org"
               "#+title:âš™${title}\n#+filetags: :PATTERN:\n")
      :unnarrowed t)
     ("d" "ğŸ—’ DOC" plain "%?"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ—’${title}\n#+filetags: :DOC:\n")
      :unnarrowrd t)
     ("k" "ğŸ¦Š Darkfox" plain "%?"
      :target (file+head 
               "zk/%<%Y%m%d%H%M%S>.org"
               "#+title:ğŸ¦Š${title}\n#+filetags: :DARKFOX:\n")
      :unnarrowed t)
     ("b" "ğŸ“š Book" plain
      "%?

- title: %^{title}
- authors: %^{author}
- date: %^{date}
- publisher: %^{publisher}
- url: http://www.amazon.co.jp/dp/%^{isbn}
"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ“š${title} - ${author}(${date})\n#+filetags: :BOOK:SOURCE:\n")
      :unnarrowed t)
     ("s" "ğŸ™â€ Talk" plain
      "%?

- title: %^{title}
- url: %^{url}
"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ™ ${title} - ${editor}(${date})\n#+filetags: :TALK:SOURCE:\n")
      :unnarrowed t)
     ("o" "ğŸ’» Online" plain
      "%?

- title: %^{title}
- authors: %^{author}
- url: %^{url}
"
      :target (file+head "zk/%<%Y%m%d%H%M%S>.org"
                         "#+title:ğŸ’»${title}\n#+filetags: :ONLINE:SOURCE:\n")
      :unnarrowed t)))
  (org-roam-extract-new-file-path "%<%Y%m%d%H%M%S>.org")
  ;;        :map org-mode-map
  ;;        ("C-M-i"    . completion-at-point)
  :config
  (defun my/org-roam-update ()
    (interactive)
    (org-roam-update-org-id-locations)
    (org-roam-db-sync))

  (setq org-roam-mode-sections
        '((org-roam-backlinks-section :unique t)))


  (setq +org-roam-open-buffer-on-find-file nil)
  (org-roam-db-autosync-mode))
#+end_src

#+begin_src emacs-lisp :tangle yes
(setq org-roam-db-node-include-function
      (lambda ()
        (not (member "" (org-get-tags)))))
#+end_src

*** consult-org-roam(Org-roamæ¤œç´¢å¼·åŒ–)

ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›.ãƒ•ã‚¡ã‚¤ãƒ«åã¯ä»Šã¯æ—¥ä»˜ã«ã—ã¦ã„ã‚‹ã‹ã‚‰ã„ã‚‰ãªã„ã‹ãª.å…¨æ–‡æ¤œç´¢ã¯å‹•ã‹ãªã„.ãƒãƒƒã‚¯ãƒªãƒ³ã‚¯æ¤œç´¢ã ã‘ä½¿ãˆãã†.

- ãƒ•ã‚¡ã‚¤ãƒ«åæ¤œç´¢
- ãƒãƒƒã‚¯ãƒªãƒ³ã‚¯æ¤œç´¢
- å…¨æ–‡æ¤œç´¢

#+begin_src emacs-lisp :tangle yes
(use-package! consult-org-roam
   :ensure t
   :init
   (require 'consult-org-roam)
   ;; Activate the minor-mode
   (consult-org-roam-mode 1)
   :custom
   (consult-org-roam-grep-func #'consult-ripgrep)
   :config
   ;; Eventually suppress previewing for certain functions
   (consult-customize
    consult-org-roam-forward-links
    :preview-key (kbd "M-."))
   :bind
   ("C-c r F" . consult-org-roam-file-find)
   ("C-c r b" . consult-org-roam-backlinks)
   ("C-c r S" . consult-org-roam-search))
#+end_src

*** Org-roamç®¡ç†ä¸‹ã®ãƒãƒ¼ãƒˆã®å…¨æ–‡æ¤œç´¢

[[https://org-roam.discourse.group/t/using-consult-ripgrep-with-org-roam-for-searching-notes/1226][Using consult-ripgrep with org-roam for searching notes - How To - Org-roam]]

consult-ripgrepã‚’ [[https://jblevins.org/projects/deft/][deft]] ã®ä»£ã‚ã‚Šã«ä½¿ã†. ã‚ˆã‚Šé«˜é€Ÿ.

#+begin_src emacs-lisp :tangle yes
(defun my/org-roam-rg-search ()
  "Search org-roam directory using consult-ripgrep. With live-preview."
  (interactive)
  (counsel-rg nil org-roam-directory))
(global-set-key (kbd "C-c r s") 'my/org-roam-rg-search)
#+end_src

*** org-publish(Org-roamã®ãƒãƒ¼ãƒˆã‚’ã‚µã‚¤ãƒˆã¸å…¬é–‹)

ä½¿ã£ã¦ãªã„ã‹ãª...

#+begin_src emacs-lisp :tangle yes
(setq org-publish-project-alist
      (list
       (list "keido"
             :recursive t
             :base-directory (file-truename "~/keido/notes/wiki")
             :publishing-directory "~/repo/keido-hugo/content/notes"
             :publishing-function 'org-hugo-export-wim-to-md)))
#+end_src

*** org-roam-dailies

Org-roamã«çµ„ã¿è¾¼ã¾ã‚ŒãŸåŠ£åŒ–ç‰ˆorg-journal. ç¾çŠ¶ä½¿ç”¨ã™ã‚‹ã®ã‚’ã‚„ã‚ãŸ.

org-roam-dialiesã‚ˆã‚Šã‚‚org-journalã‚’åˆ©ç”¨ã™ã‚‹(org-agendaã®éƒ½åˆ).

ref. [[https://org-roam.discourse.group/t/org-journal-vs-org-roam-dailies/384][Org-journal vs org-roam-dailies - Troubleshooting - Org-roam]]

é€±å˜ä½ã§æ—¥è¨˜ã®ã‚ˆã†ãªãƒšãƒ¼ã‚¸ã‚’å¤–éƒ¨å…¬é–‹ç”¨ã«ä½¿ã†.

ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã®ã‚ˆã†ãªãƒã‚¤ã‚¯ãƒ­ãƒ–ãƒ­ã‚°ã®åˆ©ç”¨ã‚’æƒ³å®šã—ã¦ã„ã‚‹.

#+begin_src emacs-lisp :tangle yes
(after! org-roam
  (setq org-roam-dailies-directory "zk")

  (setq org-roam-dailies-capture-templates
        '(("d" "default" entry "** %?" :if-new
           (file+head+olp "%<%G-w%V>.org" "#+title: ğŸ““%<%G-w%V>\n"
                          ("ğŸ–ŠJournals"))))))
#+end_src

#+begin_src emacs-lisp :tangle yes
(defun my/create-weekly-org-file (path)
  (expand-file-name (format "%s.org" (format-time-string "%Y-w%W")) path))
(defconst my/weekly-journal-dir "~/keido/notes/zk")

(after! org-capture
  (add-to-list 'org-capture-templates
        '("w" "ğŸ’­ Thought(weekly)" entry
          (file+headline (lambda ()
                     (my/create-weekly-org-file my/weekly-journal-dir))
                         "ğŸ–ŠJournals")
              "* ğŸ’­%?\n%T\n\n" 
              :empty-lines 1 
              :unnarrowed nil ;; ã»ã‹ã®ã‚¨ãƒ³ãƒˆãƒªã¯è¦‹ãˆãªã„ã‚ˆã†ã«.
              :klll-buffer t)))
#+end_src
*** org-roam-ui

Web UI.

#+begin_src emacs-lisp :tangle yes
(use-package! websocket
    :after org-roam)
(use-package! org-roam-ui
    :after org-roam ;; or :after org
;;         normally we'd recommend hooking orui after org-roam, but since org-roam does not have
;;         a hookable mode anymore, you're advised to pick something yourself
;;         if you don't care about startup time, use
    ;; :hook (after-init . org-roam-ui-mode)
    :config
    (setq org-roam-ui-sync-theme t
          org-roam-ui-follow t
          org-roam-ui-update-on-save t
          org-roam-ui-open-on-start t))


#+end_src

*** org-roam-timestamps(disabled)

org-roam-uiã§ã¤ã‹ã†ãƒ¡ã‚¿æƒ…å ±ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ãŒç›®çš„ã ãŒç¾çŠ¶ä½¿ã£ã¦ã„ãªã„ã®ã§ã„ã£ãŸã‚“å°å°.

#+begin_src emacs-lisp :tangle no
(use-package! org-roam-timestamps
   :after org-roam
   :config
   (org-roam-timestamps-mode)
   (setq org-roam-timestamps-remember-timestamps nil)
   (setq org-roam-timestamps-remember-timestamps nil))
#+end_src

** org-toggl

org-modeã‚’Togglã¨é€£æºã•ã›ã‚‹.
https://github.com/mbork/org-toggl

#+begin_src emacs-lisp :tangle yes
(use-package! org-toggl
  :after org
  :config
  (setq org-toggl-inherit-toggl-properties t)
  (toggl-get-projects)
  (setq toggl-default-project "GTD")
  (org-toggl-integration-mode))
#+end_src

** org-journal

https://github.com/bastibe/org-journal

#+begin_src emacs-lisp :tangle yes
(use-package! org-journal
  :after org
  :bind
  ("C-c r d n" . org-journal-new-entry)
  ("C-c r d d" . org-journal-open-current-journal-file)
  :custom
  (org-journal-date-prefix "#+TITLE: âœ")
  (org-journal-file-format "%Y-%m-%d.org")
  (org-journal-dir (file-truename "~/keido/notes/journals/daily"))
  (org-journal-date-format "%Y-%m-%d")
  :config
  (setq org-journal-enable-agenda-integration t)
  (defun org-journal-file-header-func (time)
     "Custom function to create journal header."
     (concat
      (pcase org-journal-file-type
        (`daily "#+STARTUP: showeverything"))))
  ;;     ;; (`weekly "#+TITLE: Weekly Journal\n#+STARTUP: folded")
  ;;     ;;(`monthly "#+TITLE: Monthly Journal\n#+STARTUP: folded")
  ;;     ;; (`yearly "#+TITLE: Yearly Journal\n#+STARTUP: folded"))))
  (setq org-journal-file-header 'org-journal-file-header-func)

  ;; org-roamã«å¯¾å¿œã•ã›ã‚‹ãŸã‚ã«org-idã‚’ç”Ÿæˆ
  (defun org-create-new-id-journal ()
    (goto-char (point-min))
    (org-id-get-create)
    (goto-char (point-max)))
  (add-hook 'org-journal-after-header-create-hook 'org-create-new-id-journal)
)
#+end_src

** org-ref(bibtex)

æ–‡çŒ®ç®¡ç†. Zoteroã¨é€£æºã—ã¦ï¼Œè«–æ–‡ã¨ã„ã†ã‚ˆã‚Šã¯æ›¸ç±ã‚„Youtubeå‹•ç”»ã‚„Webè¨˜äº‹ã®ãƒ¡ãƒ¢ã«åˆ©ç”¨.

- org-ref
- ivy-bibtex
  - ivyã®actionã¯ ivy-bibtexã§C-SPCã§é¸æŠ-> C-M-oã§actioné¸æŠå€™è£œã‚’å‡ºã—ï¼Œpã¨ã‹eã¨ã‹æŠ¼ã™.
- org-roam-bibtex

ãªã‚“ã‹zoteroã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ããªããªã£ã¦å‹•ã‹ãªããªã£ãŸ.

#+begin_src emacs-lisp :tangle yes
(use-package! org-ref
  :config
  (setq bibtex-completion-bibliography (list (file-truename "~/keido/references/zotLib.bib")))

  (setq bibtex-completion-additional-search-fields '(keywords))
  (setq bibtex-completion-display-formats
    '((online       . "${=has-pdf=:1}${=has-note=:1} ${=type=:6} ${year:4} ${author:24} ${title:*}")
      (book         . "${=has-pdf=:1}${=has-note=:1} ${=type=:6} ${year:4} ${author:24} ${title:*}")
      (video        . "${=has-pdf=:1}${=has-note=:1} ${=type=:6} ${year:4} ${editor:24} ${title:*}")
      (paper        . "${=has-pdf=:1}${=has-note=:1} ${=type=:6} ${year:4} ${author:24} ${title:*}")
      (t            . "${=has-pdf=:1}${=has-note=:1} ${=type=:6} ${year:4} ${author:24} ${title:*}")))
  (setq bibtex-completion-pdf-symbol "ğŸ““")
  (setq bibtex-completion-notes-symbol "ğŸ“")

  (setq bibtex-completion-pdf-field "file")
  ;; (setq bibtex-completion-pdf-open-function
  ;;	(lambda (fpath)
  ;;	  (call-process "open" nil 0 nil fpath)))

  ;; Create fields for Film type
  (add-to-list 'bibtex-biblatex-field-alist
               '(("video" "Video or Audio(like YouTube)")))

  (add-to-list 'bibtex-biblatex-entry-alist
               '("video" "A Video"
                 ("video", "title" "editor" "date" "url" "urldate" "abstract" "editortype")
                 nil
                 "keywords"))
  (bibtex-set-dialect 'biblatex))

(use-package! ivy-bibtex
  :after org-ref
  :init
  (map!
   :leader
   :prefix ("b" . "org-ref")
     "b" #'org-ref-bibtex-hydra/body
     "v" #'ivy-bibtex
     "c" #'org-ref-insert-cite-link
     "a" #'orb-note-actions
     "i" #'orb-insert-link)
  :config
  (setq ivy-re-builders-alist
        '((ivy-bibtex . ivy--regex-ignore-order)
          (t . ivy--regex-plus)))
  (setq ivy-bibtex-default-action #'ivy-bibtex-open-url-or-doi)
  (ivy-set-actions
   'ivy-bibtex
   '(("p" ivy-bibtex-open-any "Open PDF, URL, or DOI" ivy-bibtex-open-any)
     ("e" ivy-bibtex-edit-notes "Edit notes" ivy-bibtex-edit-notes)))
  )

(use-package! org-roam-protocol
  :after org-protocol)

(use-package! org-roam-bibtex
  :after org-roam ivy-bibtex
  :hook (org-mode . org-roam-bibtex-mode)
  :custom
  (orb-insert-interface 'ivy-bibtex)
  :config
    (setq orb-preformat-keywords '("author" "date" "url" "title" "isbn" "publisher" "urldate" "editor" "file"))
    (setq orb-process-file-keyword t)
    (setq orb-attached-file-extensions '("pdf")))
#+end_src

** org-anki

Org-modeã¨Ankiã‚’ã¤ãªã.

https://github.com/eyeinsky/org-anki

ä»Šã¾ã§anki-editorã‚’åˆ©ç”¨ã—ã¦ã„ãŸã‚‚ã®ã®ï¼Œãã®è¨˜æ³•ã¨wikiã®ç›¸æ€§ãŒæ‚ªã‹ã£ãŸï¼ˆå†—é•·ï¼‰. ã“ã‚Œãªã‚‰org-modeã®headlineãŒãã®ã¾ã¾ã¤ã‹ãˆã‚‹ã®ã§ã‚ˆã•ãã†.

#+begin_src emacs-lisp :tangle yes
(use-package! org-anki
  :after org
  :custom
  ;; one big deckã®åŸå‰‡ã«å¾“ã†.
  ;; ref: http://augmentingcognition.com/ltm.html
  (org-anki-default-deck "Default")
  :config
  (define-key org-mode-map (kbd "C-c n A s") #'org-anki-sync-entry)
  (define-key org-mode-map (kbd "C-c n A u") #'org-anki-update-all)
  (define-key org-mode-map (kbd "C-c n A d") #'org-anki-delete-entry))
#+end_src

URLã®æŒ¿å…¥ã¯org-linkå½¢å¼ã§ã§ãã‚‹. ã“ã‚Œã¯ä¾¿åˆ©.

** org-bars

ä»Šã©ãã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒŠãƒ¼çš„ãªç·šã‚’å‡ºã™.

- Terminal Mode ã§ã¯ã¤ã‹ãˆãªã„.
- ãƒªã‚¹ãƒˆã®æŠ˜è¿”ã—ã§ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯å´©ã‚Œã‚‹.

#+begin_src emacs-lisp :tangle yes
(require 'org-bars)
(add-hook! 'org-mode-hook #'org-bars-mode)
#+end_src

** Org-noter(disabled)

PDFã®æ³¨é‡ˆã‚’ç®¡ç†ã™ã‚‹. [[https://github.com/weirdNox/org-noter][:link:weirdNox/org-noter]]

ã¯ã˜ã‚ã®èµ·å‹•ãŒã©ã†ã‚„ã‚Œã°ã„ã„ã®ã‹ãƒ¯ã‚«ãƒ©ãªã‹ã£ãŸ. ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²ã‚’æ®‹ã—ãŸã„å ´åˆã¯PDFã®Bufferã§ã¯ãªã, é©å½“ãªheadingä½œæˆã—ã¦M-x org-noterã‚’èµ·å‹•ã™ã‚‹ã¨PDFã‚’é¸æŠã§ãã‚‹.

M-x org-noter-create-skeltonã¨ã„ã†é–¢æ•°ãŒãƒ¤ã°ã„. [[https://youtu.be/lCc3UoQku-E?t=68][ğŸ”—Youtubeå‹•ç”»(1:08)]] PDFã‹ã‚‰Outlineã‚’æŠœãå‡ºã—ã¦Org fileã«ç”Ÿæˆã—ã¦ï¼Œã‚ã¨ã¯ãã®Org-fileã®Bulletã®ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•ã™ã‚‹ã¨PDFã®ã»ã†ã‚‚ã‚·ãƒ³ã‚¯ãƒ­ã—ã¦ç§»å‹•ã§ãã‚‹. 

å‡„ã™ãã¦ç¬‘ã£ãŸğŸ˜‚

#+begin_src emacs-lisp :tangle no
(use-package! org-noter
  :after (:any org pdf-view)
  :config
  (setq
   ;; I want to see the whole file
   org-noter-hide-other nil
   ;; Everything is relative to the main notes file
   org-noter-notes-search-path (list (file-truename "~/keido/notes/wiki"))))
#+end_src

** org-trello(disabled)

Kanbanãƒ„ãƒ¼ãƒ« Trelloé€£æº. 

- refs.
  - [[http://org-trello.github.io/][org-trello(official)]]
  - [[https://github.com/org-trello/org-trello][GitHub - org-trello/org-trello]]

å¤ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ãŒãƒ¡ãƒ³ãƒ†ã‚‚ã•ã‚Œã¦ã„ã¦ã‚¹ã‚¿ãƒ¼ã‚‚500ä»¥ä¸Šã¤ã„ã¦ã„ã‚‹.

ãŸã ã—å‹•ã‹ãªã„...native compç„¡åŠ¹ã§è¡Œã‘ã‚‹ã‹. -> ã„ã‘ãŸ.
https://github.com/org-trello/org-trello/issues/418

#+begin_src emacs-lisp :tangle no
(use-package! org-trello)
#+end_src

ã©ã†ã‚‚Doom Emacsã ã¨ C-uãŒåŠ¹ã‹ãªã„. ãã—ã¦ãã‚Œã«ã‚ˆã£ã¦trello->org-fileã¸ã®downloadãŒC-u C-c o sã«é ¼ã£ã¦ã„ã‚‹ã®ã§ä¸ä¾¿ã«ãªã‚‹. *(org-trello-sync-buffer t)* ã‚’è©•ä¾¡ã™ã‚‹ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒèµ°ã‚‹ã¨ã„ã†ä»•æ§˜ã®ãŸã‚ã“ã‚Œã‚’é–¢æ•°ã«ã—ã¦å‘¼ã¶ã“ã¨ã«ã‚ˆã£ã¦ä»£æ›¿.

[[https://github.com/org-trello/org-trello/issues/409][Synching from and to Trello does not work Â· Issue #409]]

#+begin_src emacs-lisp :tangle no
(after! org-trello
  (defun my/org-trello-sync-from-trello ()
    (interactive)
    (org-trello-sync-buffer t)))
#+end_src

** org-table

#+begin_src emacs-lisp :tangle yes
(setq org-table-export-default-format "orgtbl-to-csv")
#+end_src

** org-sidebar

https://github.com/alphapapa/org-sidebar

org-sidebar-treeã§ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤º.

#+begin_src emacs-lisp :tangle yes
(use-package! org-sidebar)
#+end_src

** æœªåˆ†é¡(å¾Œã§æ•´ç†)

org-mode ã§ timestamp ã®ã¿ã‚’æŒ¿å…¥ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ é–¢æ•°. Doom Emacsã®ã›ã„ã§C-u C-c .ãŒå‹•ä½œã—ãªã„ã®ã§.

#+begin_src emacs-lisp :tangle yes
(after! org
  (defun my/insert-timestamp ()
    "Insert time stamp."
    (interactive)
    (org-insert-time-stamp (current-time) t)
    ;; (insert (format-time-string "%H:%M"))
    )
  (map! :map org-mode-map "C-c C-." #'my/insert-timestamp))
#+end_src

---

ç©ºç™½ãŒä¿å­˜æ™‚ã«å‰Šé™¤ã•ã‚Œã‚‹ã¨ bullet è¡¨ç¤ºãŒãŠã‹ã—ããªã‚‹.
ãªãŠ wl-bulter ã¯ doom emacs ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹.

#+begin_src emacs-lisp :tangle yes
(add-hook! 'org-mode-hook (ws-butler-mode -1))
#+end_src

* Term
#+begin_src emacs-lisp :tangle yes
;; Term
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
#+end_src

* Tools
#+begin_src emacs-lisp :tangle yes
;; Tools
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
#+end_src

** forge

magitæ‹¡å¼µ, Emacsã¨GitHubã‚’é€£æº.

doom emacsã ã¨ [[https://github.com/hlissner/doom-emacs/blob/develop/modules/tools/magit/README.org][(magit +forge)]] ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹.

ref: [[https://magit.vc/manual/forge/][Forge User and Developer Manual]]

#+begin_src emacs-lisp :tangle yes
(after! magit
  (setq auth-sources '("~/.authinfo"))
  (setq magit-revision-show-gravatars '("^Author:     " . "^Commit:     "))
  ;; (setq magit-diff-refine-hunk 'all)
)
#+end_src

ãƒªãƒã‚¸ãƒˆãƒªåã‚’å¤‰æ›´ã—ãŸå ´åˆã¯issueã‚„PRã®ä½œæˆãŒå¤±æ•—ã™ã‚‹.
ã“ã‚Œã¯ .git/configã®å•é¡Œãªã®ã§ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã™ã‚‹.

** git-link

ç¾åœ¨ã®ãƒãƒƒãƒ•ã‚¡ã®ä½ç½®ã®GitHubã®urlã‚’å–å¾—.

[[https://github.com/sshaw/git-link][sshaw/git-link]]

#+begin_src emacs-lisp :tangle yes
(global-set-key (kbd "C-c g l") 'git-link)
(use-package! git-link
  :config
  ;; urlã«branchã§ã¯ãªãcommitç•ªå·ã‚’ã¤ã‹ã†.
  ;; org-journalã¸ã®è²¼ã‚Šä»˜ã‘ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã®ã§ã“ã®è¨­å®šã«ã—ã¦ãŠã.
  (setq git-link-use-commit t))
#+end_src

* UI

ã¿ãŸã‚å‘¨ã‚Šã®è¨­å®š.

** Doom

#+begin_src emacs-lisp :tangle yes
;; UI
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; ã©ã†ã‚‚ãƒ•ã‚©ãƒ³ãƒˆãŒå¥‡æ•°ã ã¨ org-table ã®è¡¨ç¤ºãŒå´©ã‚Œã‚‹.
;; Source Han Code JP ã ã¨ãã‚‚ãã‚‚ org-table ã®è¡¨ç¤ºãŒå´©ã‚Œã‚‹.
;; terminal ã ã¨å¤§ä¸ˆå¤«ãªæ¨¡æ§˜.ãã‚‚ãã‚‚ Terminal ã¯ã“ã®è¨­å®šã§ã¯ãªãã¦ 
;; Terminal Emulator ã®è¨­å®šãŒãã.

;; (setq doom-font (font-spec :family "Source Han Code JP" :size 12 ))
(setq doom-font (font-spec :family "Ricty Diminished" :size 15))
;; doom-molokaiã‚„doom-monokai-classicã ã¨ewwã®è¡¨ç¤ºãŒã„ã¾ã„ã¡.
(setq doom-theme 'doom-molokai)
(doom-themes-org-config)

;; counselã¨doom-modelineãŒç›¸æ€§æ‚ªã„ã‚ˆã†ãªã®ã§
;; workspace nameè¡¨ç¤ºã®ãŸã‚ã«ã¯è¿½åŠ ã§è¨­å®š.
;; https://github.com/hlissner/doom-emacs/issues/314
;; (after! doom-modeline
;;  (setq doom-modeline-icon (display-graphic-p))
;;  (setq doom-modeline-major-mode-icon t))
#+end_src

https://github.com/seagle0128/doom-modeline

** emojify

Emacsã§çµµæ–‡å­—ã‚’ã¤ã‹ã†.

ã©ã†ã‚‚emojifyã®çµµæ–‡å­—è¾æ›¸ã¯ï¼Œemojione-v2.2.6-22ã¨ã„ã†ã‚‚ã®ã§ã‚„ã‚„å¤ã„.
TwitterãŒå¥½ããªã®ã§Twitterã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹è¾æ›¸ã®twemojiã«å¤‰æ›´.

https://github.com/iqbalansari/emacs-emojify/blob/master/data/emoji-sets.json

#+begin_src emacs-lisp :tangle yes
(after! emojify
  (setq emojify-emoji-set "twemoji-v2-22"))
#+end_src

ãŸã ï¼Œ2022ç¾åœ¨twemojiã¯v13ãªã®ã§v2ã¯å¤ã„ãª..ã¨ã„ã†ã‹ã§ãªã„ã‚„ã¤ã‚‚ãŠãŠã„.

Emacsã®æ©Ÿèƒ½ã§emoji-searchãŒã‚ã‚‹ã®ã§ã“ã‚Œã‚‚è¨­å®šã—ã¦ãŠã“ã†. 
ã“ã£ã¡ã®è¾æ›¸ã®ã»ã†ãŒæ‰±ãˆã‚‹æ–‡å­—ã‹å¤šã„.

#+begin_src emacs-lisp :tangle yes
;; doomã ã¨ C-c i eã§emojify-insert-emoji
(global-set-key (kbd "C-c i E") 'emoji-search)
#+end_src

** svg-tag-mode

TODOã»ã‹ãƒ©ãƒ™ãƒ«ã‚’ç¾ã—ã. 

[[https://github.com/rougier/svg-tag-mode][GitHub - rougier/svg-tag-mode]]

#+begin_src emacs-lisp :tangle yes
(use-package! svg-tag-mode
  :config
  (setq svg-tag-tags
        '(
          ;; :XXX:
          ("\\(:[A-Z]+:\\)" . ((lambda (tag)
                                 (svg-tag-make tag :beg 1 :end -1))))          
          ;; :XXX|YYY:
          ("\\(:[A-Z]+\\)\|[a-zA-Z#0-9]+:" . ((lambda (tag)
                                                (svg-tag-make tag :beg 1 :inverse t
                                                              :margin 0 :crop-right t))))
          (":[A-Z]+\\(\|[a-zA-Z#0-9]+:\\)" . ((lambda (tag)
                                                (svg-tag-make tag :beg 1 :end -1
                                                              :margin 0 :crop-left t))))
          ;; :#TAG1:#TAG2:â€¦:$
          ("\\(:#[A-Za-z0-9]+\\)" . ((lambda (tag)
                                       (svg-tag-make tag :beg 2))))
          ("\\(:#[A-Za-z0-9]+:\\)$" . ((lambda (tag)
                                       (svg-tag-make tag :beg 2 :end -1))))
          )))
#+end_src

** Others

#+begin_src emacs-lisp :tangle yes
(setq display-line-numbers-type t) ; è¡Œç•ªå·è¡¨ç¤º

;; less ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«é–²è¦§ã«æ“ä½œæ€§ã‚’ä¼¼ã›ã‚‹ mode.
;; view-mode ã¯ emacs å†…è”µ. C-x C-r ã§ read-only-mode ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³
;; doom emacs ã ã¨ C-c t r ã§ read-only-mode ãŒèµ·å‹•ã™ã‚‹.
(add-hook! view-mode
  (setq view-read-only t)
  (define-key ctl-x-map "\C-q" 'view-mode) ;; assinged C-x C-q.

  ;; less ã£ã¼ã.
  (define-key view-mode-map (kbd "p") 'view-scroll-line-backward)
  (define-key view-mode-map (kbd "n") 'view-scroll-line-forward)
  ;; default ã® e ã§ã‚‚ã„ã„ã‘ã©ï¼Œmule æ™‚ä»£ã« v ã« bind ã•ã‚Œã¦ãŸã®ã§, 
  ;; emacs ã§ã‚‚ v ã« bind ã—ã¦ãŠã.
  (define-key view-mode-map (kbd "v") 'read-only-mode))

;; EXWMã®å ´åˆsuspend-frameã§ãƒãƒ³ã‚°ã™ã‚‹ã®ã¯ãŸã¡ãŒæ‚ªã„ã®ã§å°å°.
(use-package! frame
  :bind
  ("C-z" . nil))

;; å®Ÿé¨“, ã©ã†ã‚‚ãƒã‚¦ã‚¹æ“ä½œã§Emacsã®åˆ¶å¾¡ãŒåŠ¹ã‹ãªããªã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§.
(setq make-pointer-invisible nil)

;; (general-def
;;  :keymaps 'override
;;   "C-u" 'universal-argument)
#+end_src
